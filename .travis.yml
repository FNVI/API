language: php
php:
- '5.6'
- '7.0'
- '7.1'
before_script:
- sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 0C49F3730359A14518585931BC711F9BA15703C6
- echo "deb [ arch=amd64 ] http://repo.mongodb.org/apt/ubuntu precise/mongodb-org/3.4
  multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-3.4.list
- sudo apt-get update
- sudo apt-get install -y mongodb-org
- sleep 15
- phpenv config-add travisConfig.ini
- composer self-update
- composer install --prefer-source --no-interaction
script: phpunit
env:
  global:
    secure: L5l7bGyulo/jNpQ/mW1S5uIpPCy6Ldju/37Y1otWzLBbdJ6b4Pvjz82vqchtqo/fPjGMmxnS7FoU4WE9flgv+HsMrskiavW5fYtZkVIc3QtpPk2JF/UOlFQSEt7fzeVPbsJk857rNI0Kk/Yj1qJp3HfwAHrCOR02dbvlRTGriMuSCRkfF46ocwDgrCHzxgJ/FHJWHEIT6pjvZ9Dc5TFT7MHJshsslIbMXH1HS852muvnIT8ws8SwlZeISMZRhacQvmSIxbHAydNCbkZqge538SN1gDvlBAq6hpE4TG+4gFh9MzAwldz5Yl66r5hO6qjtXv87tXbz/Kc+tW73RrtIFbIFQRDIaGOrzkXyB2NcGkamiXPqOYRiaZqE7Q2ifQoAAJhICcNoW5YBcUdhzZ3FpisdTJ5gs+FlikFxzJSOS9YXKVNGFsezIOukt3BdZg3qYLF8lXDXyi4DMEZ8OKEFvga7+39vnoCQfFVUu4Pk+u4M2Q6VzVi+fCLNPUSKrQvNVJTlh9MiFROS6SzNDhCo7Q11wzOKvDVNQJqlMn5pZGGZLYDG4qyW7VdTcGxcgrOtGXkJ9y50scu5jJRrd2NrmGcqLfW26Xb6tfjoZgImDZavqUM8JMPPNkMDxTsvy6vu60f5IkyJIrztjM+oOyiQrHd8fTl9Qr0W9E/t36JyuSU=
after_success:
  - if  [ $TRAVIS_PHP_VERSION = '5.6' ] && [ $TRAVIS_BRANCH = 'master' ] && [ $TRAVIS_PULL_REQUEST = 'false' ]; then sh generate-api.sh; fi
